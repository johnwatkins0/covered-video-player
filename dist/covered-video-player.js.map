{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap aef74607a7b653a864e7","webpack:///./src/js/index.js"],"names":["CoveredVideoPlayer","props","setUp","appendSourceToVideoElement","bind","handleVideoClick","run","shouldRender","putStylesInHead","render","addEventListeners","maybeRenderFallback","selector","src","controls","loop","cover","coverClass","videoContainerClass","muted","fallbackCover","root","document","querySelector","innerHTML","e","styles","createElement","appendChild","window","CSS","supports","length","event","preventDefault","videoElement","paused","play","pause","addEventListener","classList","add","remove","sourceElement","setAttribute","url","type","forEach","coverElement","videoContainer","createVideoElement","createCoverElement","createVideoContainer"],"mappings":"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","file":"covered-video-player.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CoveredVideoPlayer\"] = factory();\n\telse\n\t\troot[\"CoveredVideoPlayer\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap aef74607a7b653a864e7","class CoveredVideoPlayer {\n  constructor(props) {\n    this.setUp(props);\n\n    this.appendSourceToVideoElement = this.appendSourceToVideoElement.bind(this);\n    this.handleVideoClick = this.handleVideoClick.bind(this);\n\n    this.run();\n  }\n\n  run() {\n    if (this.shouldRender()) {\n      this.putStylesInHead();\n      this.render();\n      this.addEventListeners();\n    } else {\n      this.maybeRenderFallback();\n    }\n  }\n\n  setUp({\n    selector,\n    src,\n    controls,\n    loop,\n    cover,\n    coverClass,\n    videoContainerClass,\n    muted,\n    fallbackCover,\n  }) {\n    try {\n      this.selector = selector;\n      this.root = document.querySelector(selector);\n      this.cover = cover || this.root.innerHTML;\n      this.fallbackCover = fallbackCover || '';\n      this.coverClass = coverClass || 'CoveredVideoPlayer__cover';\n      this.videoContainerClass = videoContainerClass || 'CoveredVideoPlayer__video';\n      this.src = src;\n      this.controls = typeof controls === 'undefined' ? true : controls;\n      this.loop = typeof loop === 'undefined' ? false : loop;\n      this.muted = typeof muted === 'undefined' ? true : muted;\n    } catch (e) {\n      this.maybeRenderFallback();\n    }\n  }\n\n  putStylesInHead() {\n    const styles = document.createElement('STYLE');\n\n    styles.innerHTML = `\n      ${this.selector} {\n        position: relative;\n      }\n\n      .${this.coverClass} {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        z-index: 2;\n        transition: opacity .4s;\n        background: none;\n        border: none;\n        display: block;\n        width: 100%;\n        pointer-events: none;\n      }\n\n      ${this.selector}.playing .${this.coverClass} {\n        display: none;\n      }\n\n      @supports (opacity: 0) {\n        ${this.selector}.playing .${this.coverClass} {\n          display: block;\n          opacity: 0;\n        }\n      }\n\n      .${this.videoContainerClass} video {\n        width: 100%;\n        height: auto;\n        position: relative;\n        z-index: 1;\n        cursor: pointer;\n      }\n    `;\n\n    document.querySelector('head').appendChild(styles);\n  }\n\n  shouldRender() {\n    return (\n      'HTMLVideoElement' in window &&\n      'CSS' in window &&\n      'supports' in CSS &&\n      CSS.supports('pointer-events', 'none') &&\n      this.root &&\n      this.src.length\n    );\n  }\n\n  handleVideoClick(event) {\n    event.preventDefault(); // Some browsers have default video.pause() behavior.\n\n    if (this.videoElement.paused === true) {\n      this.videoElement.play();\n    } else {\n      this.videoElement.pause();\n    }\n  }\n\n  addEventListeners() {\n    this.videoElement.addEventListener('click', this.handleVideoClick);\n    this.videoElement.addEventListener('touchstart', this.handleVideoClick);\n\n    this.videoElement.addEventListener('play', () => {\n      this.root.classList.add('playing');\n    });\n\n    this.videoElement.addEventListener('pause', () => {\n      this.root.classList.remove('playing');\n    });\n\n    if (this.loop) {\n      this.videoElement.addEventListener('ended', () => {\n        this.root.classList.remove('playing');\n      });\n    }\n  }\n\n  appendSourceToVideoElement(src) {\n    try {\n      const sourceElement = document.createElement('SOURCE');\n      sourceElement.setAttribute('src', src.url);\n      sourceElement.setAttribute('type', src.type);\n      this.videoElement.appendChild(sourceElement);\n    } catch (e) {\n      // Do nothing.\n    }\n  }\n\n  maybeRenderFallback() {\n    if (this.root && (this.fallbackCover.length || this.cover.length)) {\n      this.root.classList.add('fallback');\n      this.root.innerHTML = this.fallbackCover || this.cover;\n    }\n  }\n\n  createVideoElement() {\n    this.videoElement = document.createElement('VIDEO');\n    this.videoElement.setAttribute('controls', this.controls);\n    this.videoElement.setAttribute('loop', this.loop);\n    this.videoElement.setAttribute('muted', this.muted);\n    [...this.src].forEach(this.appendSourceToVideoElement);\n  }\n\n  createCoverElement() {\n    this.coverElement = document.createElement('BUTTON');\n    this.coverElement.innerHTML = this.cover;\n    this.coverElement.setAttribute('class', `${this.coverClass}`);\n  }\n\n  createVideoContainer() {\n    this.videoContainer = document.createElement('DIV');\n    this.videoContainer.appendChild(this.videoElement);\n    this.videoContainer.setAttribute('class', `${this.videoContainerClass}`);\n  }\n\n  render() {\n    this.createVideoElement();\n    this.createCoverElement();\n    this.createVideoContainer();\n\n    this.root.innerHTML = '';\n    this.root.appendChild(this.coverElement);\n    this.root.appendChild(this.videoContainer);\n  }\n}\n\nexport default CoveredVideoPlayer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js"],"sourceRoot":""}