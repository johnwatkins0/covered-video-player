!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoveredVideoPlayer=t():e.CoveredVideoPlayer=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){o(this,e),this.setUp(t),this.appendSourceToVideoElement=this.appendSourceToVideoElement.bind(this),this.handleVideoClick=this.handleVideoClick.bind(this),this.run()}return r(e,[{key:"run",value:function(){this.shouldRender()?(this.putStylesInHead(),this.render(),this.addEventListeners()):this.maybeRenderFallback()}},{key:"setUp",value:function(e){var t=e.selector,n=e.src,i=e.controls,o=e.loop,r=e.cover,s=e.coverClass,a=e.videoContainerClass,l=e.muted,c=e.fallbackCover;try{this.selector=t,this.root=document.querySelector(t),this.cover=r||this.root.innerHTML,this.fallbackCover=c||"",this.coverClass=s||"CoveredVideoPlayer__cover",this.videoContainerClass=a||"CoveredVideoPlayer__video",this.src=n,this.controls=void 0===i||i,this.loop=void 0!==o&&o,this.muted=void 0===l||l}catch(e){this.maybeRenderFallback()}}},{key:"putStylesInHead",value:function(){var e=document.createElement("STYLE");e.innerHTML="\n      "+this.selector+" {\n        position: relative;\n      }\n\n      ."+this.coverClass+" {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        z-index: 2;\n        transition: opacity .4s;\n        background: none;\n        border: none;\n        display: block;\n        width: 100%;\n        pointer-events: none;\n      }\n\n      "+this.selector+".playing ."+this.coverClass+" {\n        display: none;\n      }\n\n      @supports (opacity: 0) {\n        "+this.selector+".playing ."+this.coverClass+" {\n          display: block;\n          opacity: 0;\n        }\n      }\n\n      ."+this.videoContainerClass+" video {\n        width: 100%;\n        height: auto;\n        position: relative;\n        z-index: 1;\n        cursor: pointer;\n      }\n    ",document.querySelector("head").appendChild(e)}},{key:"shouldRender",value:function(){return"HTMLVideoElement"in window&&"CSS"in window&&"supports"in CSS&&CSS.supports("pointer-events","none")&&this.root&&this.src.length}},{key:"handleVideoClick",value:function(e){e.preventDefault(),!0===this.videoElement.paused?this.videoElement.play():this.videoElement.pause()}},{key:"addEventListeners",value:function(){var e=this;this.videoElement.addEventListener("click",this.handleVideoClick),this.videoElement.addEventListener("touchstart",this.handleVideoClick),this.videoElement.addEventListener("play",function(){e.root.classList.add("playing")}),this.videoElement.addEventListener("pause",function(){e.root.classList.remove("playing")}),this.loop&&this.videoElement.addEventListener("ended",function(){e.root.classList.remove("playing")})}},{key:"appendSourceToVideoElement",value:function(e){try{var t=document.createElement("SOURCE");t.setAttribute("src",e.url),t.setAttribute("type",e.type),this.videoElement.appendChild(t)}catch(e){}}},{key:"maybeRenderFallback",value:function(){this.root&&(this.fallbackCover.length||this.cover.length)&&(this.root.classList.add("fallback"),this.root.innerHTML=this.fallbackCover||this.cover)}},{key:"createVideoElement",value:function(){this.videoElement=document.createElement("VIDEO"),this.videoElement.setAttribute("controls",this.controls),this.videoElement.setAttribute("loop",this.loop),this.videoElement.setAttribute("muted",this.muted),[].concat(i(this.src)).forEach(this.appendSourceToVideoElement)}},{key:"createCoverElement",value:function(){this.coverElement=document.createElement("BUTTON"),this.coverElement.innerHTML=this.cover,this.coverElement.setAttribute("class",""+this.coverClass)}},{key:"createVideoContainer",value:function(){this.videoContainer=document.createElement("DIV"),this.videoContainer.appendChild(this.videoElement),this.videoContainer.setAttribute("class",""+this.videoContainerClass)}},{key:"render",value:function(){this.createVideoElement(),this.createCoverElement(),this.createVideoContainer(),this.root.innerHTML="",this.root.appendChild(this.coverElement),this.root.appendChild(this.videoContainer)}}]),e}();t.default=s}])});