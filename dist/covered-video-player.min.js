!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoveredVideoPlayer=t():e.CoveredVideoPlayer=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(){function e(t){i(this,e),this.setUp(t),this.appendSourceToVideoElement=this.appendSourceToVideoElement.bind(this),this.run()}return r(e,[{key:"run",value:function(){this.shouldRender()?(this.putStylesInHead(),this.render(),this.addEventListeners()):this.maybeRenderFallback()}},{key:"setUp",value:function(e){var t=e.selector,n=e.src,o=e.controls,i=e.loop,r=e.cover,s=e.coverClass,a=e.videoContainerClass,l=e.muted,c=e.fallbackCover;try{this.selector=t,this.root=document.querySelector(t),this.cover=r||this.root.innerHTML,this.fallbackCover=c||"",this.coverClass=s||"CoveredVideoPlayer__cover",this.videoContainerClass=a||"CoveredVideoPlayer__video",this.src=n,this.controls=void 0===o||o,this.loop=void 0!==i&&i,this.muted=void 0===l||l}catch(e){this.maybeRenderFallback()}}},{key:"putStylesInHead",value:function(){var e=document.createElement("STYLE");e.innerHTML="\n      "+this.selector+" {\n        position: relative;\n      }\n\n      ."+this.coverClass+" {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        z-index: 2;\n        transition: opacity .4s;\n        background: none;\n        border: none;\n        display: block;\n        width: 100%;\n        pointer-events: none;\n      }\n\n      "+this.selector+".playing ."+this.coverClass+" {\n        display: none;\n      }\n\n      @supports (opacity: 0) {\n        "+this.selector+".playing ."+this.coverClass+" {\n          display: block;\n          opacity: 0;\n        }\n      }\n\n      ."+this.videoContainerClass+" video {\n        width: 100%;\n        height: auto;\n        position: relative;\n        z-index: 1;\n        cursor: pointer;\n      }\n    ",document.querySelector("head").append(e)}},{key:"shouldRender",value:function(){return"HTMLVideoElement"in window&&"CSS"in window&&"supports"in CSS&&CSS.supports("pointer-events","none")&&this.root&&this.src.length}},{key:"addEventListeners",value:function(){var e=this;this.videoElement.addEventListener("click",function(){e.videoElement.paused?e.videoElement.play():e.videoElement.pause()}),this.videoElement.addEventListener("play",function(){e.root.classList.add("playing")}),this.videoElement.addEventListener("pause",function(){e.root.classList.remove("playing")}),this.loop&&this.videoElement.addEventListener("ended",function(){e.root.classList.remove("playing")})}},{key:"appendSourceToVideoElement",value:function(e){try{var t=document.createElement("SOURCE");t.setAttribute("src",e.url),t.setAttribute("type",e.type),this.videoElement.append(t)}catch(e){this.maybeRenderFallback()}}},{key:"maybeRenderFallback",value:function(){this.root&&(this.fallbackCover||this.cover)&&(this.root.classList.add("fallback"),this.root.innerHTML=this.fallbackCover||this.cover)}},{key:"createVideoElement",value:function(){this.videoElement=document.createElement("VIDEO"),this.videoElement.setAttribute("controls",this.controls),this.videoElement.setAttribute("loop",this.loop),this.videoElement.setAttribute("muted",this.muted),[].concat(o(this.src)).forEach(this.appendSourceToVideoElement)}},{key:"createCoverElement",value:function(){this.coverElement=document.createElement("BUTTON"),this.coverElement.innerHTML=this.cover,this.coverElement.setAttribute("class","CoveredVideoPlayer__cover")}},{key:"createVideoContainer",value:function(){this.videoContainer=document.createElement("DIV"),this.videoContainer.append(this.videoElement),this.videoContainer.setAttribute("class","CoveredVideoPlayer__video")}},{key:"render",value:function(){this.createVideoElement(),this.createCoverElement(),this.createVideoContainer(),this.root.innerHTML="",this.root.append(this.coverElement),this.root.append(this.videoContainer)}}]),e}();t.default=s}])});